<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Strands â€” FAQ Assistant</title>
<link href="https://fonts.googleapis.com/css2?family=Syne:wght@400;600;700&family=Inter:wght@300;400;500&display=swap" rel="stylesheet">
<style>
  *, *::before, *::after { box-sizing: border-box; margin: 0; padding: 0; }
  :root {
    --bg: #f0f4f8; --surface: #ffffff; --border: #dde3ea;
    --accent: #1a56db; --accent-dark: #1340b0; --accent-light: #ebf0fd;
    --text: #111827; --muted: #6b7280; --bot-bg: #f8fafc; --user-bg: #1a56db;
  }
  body {
    background: var(--bg); color: var(--text); font-family: 'Inter', sans-serif;
    min-height: 100vh; display: flex; flex-direction: column;
    align-items: center; justify-content: center; padding: 20px;
    background-image: radial-gradient(circle at 85% 15%, rgba(26,86,219,0.07) 0%, transparent 50%),
                      radial-gradient(circle at 10% 85%, rgba(26,86,219,0.04) 0%, transparent 40%);
  }
  .wrapper { width: 100%; max-width: 720px; }
  .header { display: flex; align-items: center; gap: 16px; margin-bottom: 24px; animation: fadeDown 0.5s ease both; }
  .header-right { margin-left: auto; }
  .lang-toggle {
    display: flex; border: 1px solid var(--border); border-radius: 10px;
    overflow: hidden; background: var(--surface);
  }
  .lang-btn {
    padding: 7px 14px; font-family: 'Inter', sans-serif; font-size: 13px;
    font-weight: 500; border: none; cursor: pointer; background: none;
    color: var(--muted); transition: all 0.2s; display: flex; align-items: center; gap: 5px;
  }
  .lang-btn.active { background: var(--accent); color: white; }
  .lang-btn:hover:not(.active) { background: var(--accent-light); color: var(--accent); }
  .logo-mark {
    width: 48px; height: 48px; background: var(--accent); border-radius: 12px;
    display: flex; align-items: center; justify-content: center;
    font-family: 'Syne', sans-serif; font-weight: 700; font-size: 14px; color: white;
    flex-shrink: 0; box-shadow: 0 4px 14px rgba(26,86,219,0.3); letter-spacing: -0.5px;
  }
  .header-text h1 { font-family: 'Syne', sans-serif; font-size: 22px; font-weight: 700; color: var(--text); }
  .header-text p { font-size: 13px; color: var(--muted); margin-top: 2px; font-weight: 300; }
  .status-dot { width: 7px; height: 7px; background: #22c55e; border-radius: 50%; display: inline-block; margin-right: 5px; animation: pulse 2s infinite; }
  .chat-box {
    background: var(--surface); border: 1px solid var(--border); border-radius: 20px; overflow: hidden;
    box-shadow: 0 8px 40px rgba(0,0,0,0.07), 0 2px 8px rgba(0,0,0,0.04); animation: fadeUp 0.6s ease both 0.1s;
  }
  .messages { height: 460px; overflow-y: auto; padding: 24px 22px; display: flex; flex-direction: column; gap: 14px; scroll-behavior: smooth; }
  .messages::-webkit-scrollbar { width: 4px; }
  .messages::-webkit-scrollbar-thumb { background: var(--border); border-radius: 4px; }
  .message { display: flex; gap: 10px; animation: msgIn 0.3s ease both; }
  .message.user { flex-direction: row-reverse; }
  .avatar { width: 32px; height: 32px; border-radius: 10px; flex-shrink: 0; display: flex; align-items: center; justify-content: center; font-size: 10px; font-weight: 700; font-family: 'Syne', sans-serif; }
  .bot-avatar { background: var(--accent); color: white; box-shadow: 0 2px 8px rgba(26,86,219,0.25); }
  .user-avatar { background: #e5e7eb; color: var(--muted); }
  .bubble { max-width: 80%; padding: 12px 16px; border-radius: 14px; font-size: 14px; line-height: 1.7; }
  .bot .bubble { background: var(--bot-bg); border: 1px solid var(--border); border-top-left-radius: 4px; color: var(--text); }
  .user .bubble { background: var(--user-bg); border-top-right-radius: 4px; color: white; }
  .bubble a { color: var(--accent); text-decoration: underline; }
  .user .bubble a { color: #c7d9ff; }
  .dots { display: flex; gap: 4px; align-items: center; padding: 4px 2px; }
  .dots span { width: 6px; height: 6px; border-radius: 50%; background: var(--accent); animation: bounce 1.2s infinite; }
  .dots span:nth-child(2) { animation-delay: 0.2s; }
  .dots span:nth-child(3) { animation-delay: 0.4s; }
  .tabs { display: flex; gap: 6px; padding: 14px 22px 0; border-bottom: 1px solid var(--border); overflow-x: auto; scrollbar-width: none; }
  .tabs::-webkit-scrollbar { display: none; }
  .tab-btn { background: none; border: none; padding: 7px 14px; font-family: 'Inter', sans-serif; font-size: 12.5px; font-weight: 500; color: var(--muted); cursor: pointer; border-radius: 8px 8px 0 0; white-space: nowrap; transition: all 0.2s; border-bottom: 2px solid transparent; margin-bottom: -1px; }
  .tab-btn:hover { color: var(--accent); background: var(--accent-light); }
  .tab-btn.active { color: var(--accent); border-bottom-color: var(--accent); background: var(--accent-light); }
  .suggestions { padding: 12px 22px 14px; display: flex; flex-wrap: wrap; gap: 7px; }
  .suggestion-btn { background: var(--accent-light); border: 1px solid rgba(26,86,219,0.2); color: var(--accent-dark); font-family: 'Inter', sans-serif; font-size: 12.5px; padding: 6px 13px; border-radius: 20px; cursor: pointer; transition: all 0.2s ease; }
  .suggestion-btn:hover { background: var(--accent); color: white; border-color: var(--accent); transform: translateY(-1px); box-shadow: 0 3px 10px rgba(26,86,219,0.25); }
  .input-area { display: flex; align-items: center; gap: 10px; padding: 14px 18px; border-top: 1px solid var(--border); background: #fafbfc; }
  .input-area input { flex: 1; background: var(--surface); border: 1px solid var(--border); border-radius: 10px; padding: 10px 14px; outline: none; color: var(--text); font-family: 'Inter', sans-serif; font-size: 14px; transition: border-color 0.2s; }
  .input-area input:focus { border-color: var(--accent); box-shadow: 0 0 0 3px rgba(26,86,219,0.1); }
  .input-area input::placeholder { color: #bbb; }
  .send-btn { width: 40px; height: 40px; border-radius: 10px; background: var(--accent); border: none; cursor: pointer; display: flex; align-items: center; justify-content: center; transition: all 0.2s; flex-shrink: 0; box-shadow: 0 2px 8px rgba(26,86,219,0.3); }
  .send-btn:hover { background: var(--accent-dark); transform: translateY(-1px); }
  .send-btn svg { width: 16px; height: 16px; fill: white; }
  .footer { display: flex; justify-content: space-between; align-items: center; margin-top: 16px; animation: fadeUp 0.6s ease both 0.2s; }
  .footer-left { font-size: 12px; color: var(--muted); }
  .footer-left a { color: var(--accent); text-decoration: none; font-weight: 500; }
  .footer-right { font-size: 12px; color: #bbb; }
  @keyframes fadeDown { from { opacity:0; transform:translateY(-14px); } to { opacity:1; transform:translateY(0); } }
  @keyframes fadeUp { from { opacity:0; transform:translateY(14px); } to { opacity:1; transform:translateY(0); } }
  @keyframes msgIn { from { opacity:0; transform:translateY(8px); } to { opacity:1; transform:translateY(0); } }
  @keyframes bounce { 0%,60%,100% { transform:translateY(0); } 30% { transform:translateY(-5px); } }
  @keyframes pulse { 0%,100% { opacity:1; } 50% { opacity:0.4; } }
</style>
</head>
<body>
<div class="wrapper">
  <div class="header">
    <div class="logo-mark">STR<br>ANDS</div>
    <div class="header-text">
      <h1 id="h-title">Strands Support</h1>
      <p><span class="status-dot"></span><span id="h-sub">FAQ Assistant Â· Always available Â· No login needed</span></p>
    </div>
    <div class="header-right">
      <div class="lang-toggle">
        <button class="lang-btn active" onclick="setLang('en', this)">ğŸ‡¬ğŸ‡§ EN</button>
        <button class="lang-btn" onclick="setLang('sv', this)">ğŸ‡¸ğŸ‡ª SV</button>
      </div>
    </div>
  </div>

  <div class="chat-box">
    <div class="tabs" id="tabs"></div>
    <div class="messages" id="messages"></div>
    <div class="suggestions" id="suggestions"></div>
    <div class="input-area">
      <input type="text" id="userInput" placeholder="Ask anything about Strands products..." onkeydown="if(event.key==='Enter') sendMessage()" />
      <button class="send-btn" onclick="sendMessage()">
        <svg viewBox="0 0 24 24"><path d="M2 21l21-9L2 3v7l15 2-15 2z"/></svg>
      </button>
    </div>
  </div>

  <div class="footer">
    <div class="footer-left">Content from <a href="https://strandseurope.com" target="_blank">strandseurope.com</a></div>
    <div class="footer-right">Â© Strands Group AB</div>
  </div>
</div>

<script>
const SP = 'https://strandsab.sharepoint.com/:f:/s/Aftersales/IgCYn40pqzMbRoOqLDUeQriXAVinLQoFqQg17TGDdmvMdu0?e=OumEKT';

// â”€â”€ WEB SEARCH (NO API KEY) + UNANSWERED LOGGING â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
const PRODUCT_SITE = 'strandseurope.com';
const UNANSWERED_KEY = 'strands_unanswered_v1';

function googleSearchUrl(q) {
  return 'https://www.google.com/search?q=' + encodeURIComponent(q);
}

function googleSiteSearchUrl(q, site = PRODUCT_SITE) {
  return 'https://www.google.com/search?q=' + encodeURIComponent('site:' + site + ' ' + q);
}

function detectArticleNumbers(text) {
  // Typical Strands article numbers are 6 digits (e.g., 809238).
  const matches = text.match(/\b\d{6}\b/g) || [];
  return [...new Set(matches)];
}

function loadUnanswered() {
  try {
    return JSON.parse(localStorage.getItem(UNANSWERED_KEY) || '[]');
  } catch (e) {
    return [];
  }
}

function saveUnanswered(items) {
  try {
    localStorage.setItem(UNANSWERED_KEY, JSON.stringify(items));
  } catch (e) {
    // ignore storage errors (private mode / quota)
  }
}

function logUnanswered(query, meta = {}) {
  const items = loadUnanswered();
  items.push({
    query: query,
    lang: meta.lang || (typeof lang !== 'undefined' ? lang : 'en'),
    articles: meta.articles || [],
    ts: new Date().toISOString(),
    ua: navigator.userAgent
  });
  // keep last 300 entries to avoid unbounded growth
  if (items.length > 300) items.splice(0, items.length - 300);
  saveUnanswered(items);
}

function escapeHtml(str) {
  return String(str)
    .replace(/&/g, '&amp;')
    .replace(/</g, '&lt;')
    .replace(/>/g, '&gt;')
    .replace(/\"/g, '&quot;')
    .replace(/'/g, '&#39;');
}

function renderUnansweredReport(limit = 15) {
  const items = loadUnanswered();
  const isSv = (typeof lang !== 'undefined' && lang === 'sv');
  if (!items.length) {
    return isSv ? 'Inga loggade obesvarade frÃ¥gor Ã¤nnu.' : 'No unanswered questions logged yet.';
  }

  // Count by exact query
  const counts = new Map();
  for (const it of items) {
    const key = (it.query || '').trim();
    if (!key || key.startsWith('/unanswered')) continue;
    counts.set(key, (counts.get(key) || 0) + 1);
  }

  const top = [...counts.entries()]
    .sort((a, b) => b[1] - a[1])
    .slice(0, limit);

  const latest = (items[items.length - 1] && items[items.length - 1].ts) ? items[items.length - 1].ts : '';

  const title = isSv ? 'Obesvarade frÃ¥gor (topp)' : 'Unanswered questions (top)';
  const total = isSv ? 'Totalt loggade' : 'Total logged';
  const last = isSv ? 'Senast' : 'Latest';

  let html = '<b>' + title + '</b><br>' + total + ': ' + items.length + '<br>' + last + ': ' + escapeHtml(latest) + '<br><br>';

  html += top.map(([q, c], i) => {
    const articles = detectArticleNumbers(q);
    const productLinks = articles.length
      ? '<br>' + articles.slice(0, 3).map(a => 'ğŸ›ï¸ <a href="' + googleSiteSearchUrl(a) + '" target="_blank" rel="noopener">' + a + '</a>').join(' ')
      : '';
    return (i + 1) + '. (' + c + 'Ã—) ' + escapeHtml(q) + productLinks;
  }).join('<br><br>');

  html += '<br><br><i>' + (isSv ? 'Tips: skriv /unanswered clear fÃ¶r att rensa loggen.' : 'Tip: type /unanswered clear to wipe the log.') + '</i>';
  return html;
}

function clearUnanswered() {
  try { localStorage.removeItem(UNANSWERED_KEY); } catch (e) {}
}


// â”€â”€ LANGUAGE DATA â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
let lang = 'en';

const UI = {
  en: {
    title: 'Strands Support',
    sub: 'FAQ Assistant Â· Always available Â· No login needed',
    placeholder: 'Ask anything about Strands products...',
    welcome: `Hi! ğŸ‘‹ I'm the Strands FAQ assistant. I can help you with:\n\nâ€¢ Light technology (lumen, lux, Kelvin, ECE, IP rating)\nâ€¢ Orders, delivery & returns\nâ€¢ Warranty & claims\nâ€¢ CAN bus & XBB installation\nâ€¢ Product questions\n\nUse the tabs above to browse by topic, or just ask me anything!`,
    tabs: ['All Topics','Tech & Facts','Orders & Delivery','Warranty & Returns','CAN bus & XBB','Products','Contact'],
    tabKeys: ['all','tech','order','warranty','canbus','product','contact'],
    fallback: `I'm not sure about that. Here are ways to get help:\n\nğŸ“§ <a href="mailto:support@strands.se">support@strands.se</a>\nğŸ“ +46(0)320-450450\nğŸ“ <a href="${SP}" target="_blank">Aftersales documents folder â†’</a>\nğŸ”— <a href="https://strandseurope.com" target="_blank">strandseurope.com â†’</a>`,
    categories: {
      all: ['What light technology types exist?','What is lumen and lux?','What are ECE regulations?','How long is the warranty?','How do I track my order?','Do I need a CAN bus interface?','What is IP rating?','How do I contact support?','Where are the Aftersales documents?'],
      tech: ['What light technology types exist?','What is lumen and lux?','What is Kelvin?','What are beam patterns?','What are ECE regulations?','What is IP rating?','What amp rating do I need?'],
      order: ['Is there a minimum order?','Can I change my order?','How long is delivery?','How do I track my order?','Do you offer express delivery?','I received the wrong product','Items missing from my order'],
      warranty: ['How long is the warranty?','My product has broken','Does warranty cover modifications?','Can I cut the cable?','Can I cut the DT connector?','I want to return a product'],
      canbus: ['Do I need a CAN bus interface?','Will XBB work with my new car?','Do I need resistors for LED taillights?','What happens after a software update?','Will high beam automatics work?'],
      product: ['Which driving light should I choose?','What is No-Glare technology?','What is E-mode vs Xperience mode?','There is condensation in my light','Where can I find the manual?','Do you offer spare parts?'],
      contact: ['How do I contact support?','How do I become a reseller?','What are your opening hours?','Where are the Aftersales documents?']
    }
  },
  sv: {
    title: 'Strands Support',
    sub: 'FAQ-assistent Â· Alltid tillgÃ¤nglig Â· Ingen inloggning krÃ¤vs',
    placeholder: 'StÃ¤ll en frÃ¥ga om Strands produkter...',
    welcome: `Hej! ğŸ‘‹ Jag Ã¤r Strands FAQ-assistent. Jag kan hjÃ¤lpa dig med:\n\nâ€¢ Ljusteknik (lumen, lux, Kelvin, ECE, IP-klass)\nâ€¢ Order, leverans & retur\nâ€¢ Garanti & reklamation\nâ€¢ CAN bus & XBB-installation\nâ€¢ ProduktfrÃ¥gor\n\nAnvÃ¤nd flikarna ovan fÃ¶r att blÃ¤ddra efter Ã¤mne, eller stÃ¤ll din frÃ¥ga direkt!`,
    tabs: ['Alla Ã¤mnen','Teknik & fakta','Order & leverans','Garanti & retur','CAN bus & XBB','Produkter','Kontakt'],
    tabKeys: ['all','tech','order','warranty','canbus','product','contact'],
    fallback: `Jag Ã¤r osÃ¤ker pÃ¥ det. HÃ¤r Ã¤r sÃ¤tt att fÃ¥ hjÃ¤lp:\n\nğŸ“§ <a href="mailto:support@strands.se">support@strands.se</a>\nğŸ“ +46(0)320-450450\nğŸ“ <a href="${SP}" target="_blank">Aftersales-dokumentmapp â†’</a>\nğŸ”— <a href="https://strandseurope.com" target="_blank">strandseurope.com â†’</a>`,
    categories: {
      all: ['Vilka ljustekniker finns?','Vad Ã¤r lumen och lux?','Vad Ã¤r ECE-reglerna?','Hur lÃ¥ng Ã¤r garantin?','Hur spÃ¥rar jag min bestÃ¤llning?','BehÃ¶ver jag Canbus-interface?','Vad Ã¤r IP-klassning?','Hur kontaktar jag support?','Var finns Aftersales-dokument?'],
      tech: ['Vilka ljustekniker finns?','Vad Ã¤r lumen och lux?','Vad Ã¤r Kelvin?','Vilka ljusbilder finns?','Vad Ã¤r ECE-reglerna?','Vad Ã¤r IP-klassning?','Vilket amperetal behÃ¶ver jag?'],
      order: ['Finns det en minsta ordergrÃ¤ns?','Kan jag Ã¤ndra min bestÃ¤llning?','Hur lÃ¥ng Ã¤r leveranstiden?','Hur spÃ¥rar jag min bestÃ¤llning?','Erbjuder ni expressfrakt?','Jag har fÃ¥tt fel vara','Det saknas varor i min bestÃ¤llning'],
      warranty: ['Hur lÃ¥ng Ã¤r garantin?','Min produkt har gÃ¥tt sÃ¶nder','GÃ¤ller garantin vid modifiering?','FÃ¥r jag klippa kabeln?','FÃ¥r jag klippa DT-kontakten?','Jag vill returnera en produkt'],
      canbus: ['BehÃ¶ver jag Canbus-interface?','Fungerar XBB med min nya bil?','BehÃ¶ver jag motstÃ¥nd till LED?','Vad hÃ¤nder efter mjukvaruuppdatering?','Fungerar helljusautomatik?'],
      product: ['Vilket extraljus passar min bil?','Vad Ã¤r No-Glare?','Vad Ã¤r E-mode och Xperience?','Det Ã¤r kondens i min lampa','Var finns produktmanualen?','Erbjuder ni reservdelar?'],
      contact: ['Hur kontaktar jag support?','Jag vill bli Ã¥terfÃ¶rsÃ¤ljare','Vilka Ã¤r Ã¶ppettiderna?','Var finns Aftersales-dokument?']
    }
  }
};

// â”€â”€ BILINGUAL FAQ â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
const FAQ = [
  // TECH
  {
    cat: 'tech',
    keywords: { en: ['light technology','halogen','xenon','led','types of lights','kind of technology'], sv: ['ljusteknik','halogen','xenon','led','ljustekniker','typ av ljus','lampor teknik'] },
    answer: {
      en: `The most common types are halogen, xenon, and LED:\n\nğŸ’¡ Halogen â€” Uses halogen gas and a filament. Brighter than regular bulbs but less luminous and shorter lifespan than xenon or LED. Generates significant heat.\n\nğŸ’¡ Xenon â€” Contains xenon gas, no filament. Longer lifespan, less power consumption than halogen. Takes a moment to reach full brightness. Also generates heat.\n\nğŸ’¡ LED â€” Most modern and most common in Strands products:\nâ€¢ Very long lifespan\nâ€¢ Low power consumption\nâ€¢ Short ignition time\nâ€¢ Better resistance to vibrations\n\nğŸ”— <a href="https://strands.se/kunskapsbank/valj-ratt-extraljus-den-ultimata-guiden/" target="_blank">Read more in our knowledge bank â†’</a>`,
      sv: `De vanligaste teknikerna Ã¤r halogen, xenon och LED:\n\nğŸ’¡ Halogen â€” GlÃ¶dtrÃ¥d och halogengas. Starkare Ã¤n vanliga glÃ¶dlampor men svagare och kortare livslÃ¤ngd Ã¤n xenon och LED. HÃ¶g vÃ¤rmeutveckling.\n\nğŸ’¡ Xenon â€” InnehÃ¥ller xenongas, ingen glÃ¶dtrÃ¥d. LÃ¤ngre livslÃ¤ngd och lÃ¤gre strÃ¶mfÃ¶rbrukning Ã¤n halogen. Tar lite tid att nÃ¥ full styrka. HÃ¶g vÃ¤rmeutveckling.\n\nğŸ’¡ LED â€” Modernaste tekniken och vanligast i Strands sortiment:\nâ€¢ Mycket lÃ¥ng livslÃ¤ngd\nâ€¢ LÃ¥g strÃ¶mfÃ¶rbrukning\nâ€¢ Kort upptÃ¤ndningstid\nâ€¢ Klarar vibrationer bÃ¤ttre\n\nğŸ”— <a href="https://strands.se/kunskapsbank/valj-ratt-extraljus-den-ultimata-guiden/" target="_blank">LÃ¤s mer i vÃ¥r kunskapsbank â†’</a>`
    }
  },
  {
    cat: 'tech',
    keywords: { en: ['lumen','lux','light output','brightness','intensity','luminous'], sv: ['lumen','lux','ljusstyrka','ljusflÃ¶de','intensitet','luminans'] },
    answer: {
      en: `Lumen and lux explained:\n\nğŸ“ Lumen â€” Measures the luminous flux (strength) from a light source. Strands always refers to actual lumens, not theoretical values.\n\nğŸ“ Lux â€” Measures illuminance (light hitting a surface). 1 lux = 1 lumen/mÂ². Driving lights often use "1 lux @ x meters" â€” e.g. 1 lux @ 700m means 1 lumen/mÂ² at 700 meters from the vehicle.\n\nğŸ”¬ Strands has an advanced light laboratory where all lights are tested for accurate measurements.`,
      sv: `Lumen och lux fÃ¶rklarat:\n\nğŸ“ Lumen â€” MÃ¤ter ljusflÃ¶det frÃ¥n en ljuskÃ¤lla. Strands anger alltid faktiska lumen, inte teoretiska vÃ¤rden.\n\nğŸ“ Lux â€” MÃ¤ter luminansen (hur mycket ljus som trÃ¤ffar en yta). 1 lux = 1 lumen/mÂ². Extraljus anges ofta som "1 lux @ x meter" â€” t.ex. 1 lux @ 700 m innebÃ¤r 1 lumen/mÂ² pÃ¥ 700 meters avstÃ¥nd.\n\nğŸ”¬ Strands har ett avancerat ljuslaboratorium dÃ¤r alla lampor testas fÃ¶r korrekta mÃ¤tvÃ¤rden.`
    }
  },
  {
    cat: 'tech',
    keywords: { en: ['kelvin','color temperature','warm','cool','white light'], sv: ['kelvin','fÃ¤rgtemperatur','varm','kall','vitt ljus','fÃ¤rg'] },
    answer: {
      en: `Kelvin is a measure of color temperature:\n\nğŸŒ¡ï¸ Higher Kelvin = cooler, bluer light\nğŸŒ¡ï¸ Lower Kelvin = warmer, redder light\n\nFor driving and work lights, a cooler color temperature is usually ideal â€” clear, distinct beam, easy to see ahead. A warmer temperature can reduce glare in rain and snow.`,
      sv: `Kelvin Ã¤r ett mÃ¥tt pÃ¥ fÃ¤rgtemperatur:\n\nğŸŒ¡ï¸ HÃ¶gre Kelvin = kallare, blÃ¥are ljus\nğŸŒ¡ï¸ LÃ¤gre Kelvin = varmare, rÃ¶dare ljus\n\nFÃ¶r extra- och arbetsbelysning passar oftast en kallare fÃ¤rgtemperatur bÃ¤st â€” tydlig ljusbild och enkelt att se framÃ¥t. Varmare temperatur kan minska reflexer vid regn och snÃ¶.`
    }
  },
  {
    cat: 'tech',
    keywords: { en: ['beam pattern','beam','flood','combo','pencil','optimized','extended','long-distance'], sv: ['ljusbild','flood','combo','pencil','optimized','extended','long-distance','ljusbilder','bred','smal','rÃ¤ckvidd'] },
    answer: {
      en: `Strands offers three main beam patterns:\n\nğŸ”¦ Optimized (Flood) â€” Widest beam. Best for winding roads â€” spots animals and hazards on the sides.\n\nğŸ”¦ Extended (Combo) â€” Width and distance combined. A versatile all-rounder.\n\nğŸ”¦ Long-distance (Pencil) â€” Narrow beam, maximum range. Best for long straight roads like highways.`,
      sv: `Strands har tre huvudsakliga ljusbilder:\n\nğŸ”¦ Optimized (Flood) â€” Bredaste ljusbilden. BÃ¤st fÃ¶r kurviga vÃ¤gar dÃ¤r du behÃ¶ver se djur och faror lÃ¤ngs kanten.\n\nğŸ”¦ Extended (Combo) â€” Kombination av bredd och lÃ¤ngd. MÃ¥ngsidig.\n\nğŸ”¦ Long-distance (Pencil) â€” Smal ljusbild med maximalt lÃ¥ng rÃ¤ckvidd. BÃ¤st fÃ¶r lÃ¥nga raka vÃ¤gar.`
    }
  },
  {
    cat: 'tech',
    keywords: { en: ['ece','e-approved','regulations','legal','road legal','approval'], sv: ['ece','e-godkÃ¤nt','reglemente','laglig','godkÃ¤nnande','ecr','r112'] },
    answer: {
      en: `ECE regulations govern which lights are permitted on vehicles, their intensity, and how/where they can be installed.\n\nKey rules:\nâ€¢ Driving lights must not be too powerful\nâ€¢ Position lights must have the correct color\nâ€¢ Placement and quantity rules apply\nâ€¢ Many Strands lights have E-mode (approved) and Xperience mode\n\nECE categories:\nâ€¢ ECE R6 â€“ Indicators\nâ€¢ ECE R7 â€“ Position, tail, brake lights\nâ€¢ ECE R19 â€“ Front fog lights\nâ€¢ ECE R65 â€“ Warning lights\nâ€¢ ECE R87 â€“ Daytime running lights\nâ€¢ ECE R91 â€“ Side marker lights\nâ€¢ ECE R98 â€“ Xenon headlamps\nâ€¢ ECE R112 â€“ Halogen and LED headlamps`,
      sv: `ECE-reglementet reglerar vilka lampor du fÃ¥r ha, deras intensitet och hur/var de ska installeras.\n\nViktiga regler:\nâ€¢ Ett extraljus fÃ¥r inte vara fÃ¶r starkt\nâ€¢ Positionsljus mÃ¥ste ha rÃ¤tt fÃ¤rg\nâ€¢ Regler fÃ¶r antal och placering gÃ¤ller\nâ€¢ MÃ¥nga Strands-lampor har E-lÃ¤ge (godkÃ¤nt) och Xperience-lÃ¤ge\n\nECE-kategorier:\nâ€¢ ECE R6 â€“ Blinkers\nâ€¢ ECE R7 â€“ Positions-, bak-, bromslampor\nâ€¢ ECE R19 â€“ DimstrÃ¥lkastare\nâ€¢ ECE R65 â€“ Varningsljus\nâ€¢ ECE R87 â€“ Varselljus\nâ€¢ ECE R91 â€“ Sidomarkeringsljus\nâ€¢ ECE R98 â€“ Xenon-strÃ¥lkastare\nâ€¢ ECE R112 â€“ Halogen- och LED-strÃ¥lkastare`
    }
  },
  {
    cat: 'tech',
    keywords: { en: ['ip rating','ip class','waterproof','dustproof','water protection'], sv: ['ip-klassning','ip-klass','vattentÃ¤t','dammtÃ¤t','vattenskydd','ip66'] },
    answer: {
      en: `IP rating indicates protection against solids and liquids:\n\nFirst digit (dust, 0â€“6):\nâ€¢ 5 = Dust protected\nâ€¢ 6 = Dust-tight\n\nSecond digit (water):\nâ€¢ 5 = Water jets from nozzle\nâ€¢ 6 = Powerful water jets\nâ€¢ 7 = Temporary submersion\nâ€¢ 8 = Continuous immersion\nâ€¢ 9(K) = High-pressure/high-temp water\n\nExample: IP66 = dust-tight + powerful water jets.`,
      sv: `IP-klassning anger skydd mot fasta Ã¤mnen och vatten:\n\nFÃ¶rsta siffran (damm, 0â€“6):\nâ€¢ 5 = Dammskyddad\nâ€¢ 6 = DammtÃ¤t\n\nAndra siffran (vatten):\nâ€¢ 5 = Skyddad mot spolande vatten\nâ€¢ 6 = Skyddad mot kraftig Ã¶verspolning\nâ€¢ 7 = TillfÃ¤llig nedsÃ¤nkning\nâ€¢ 8 = LÃ¥ngvarig nedsÃ¤nkning\nâ€¢ 9(K) = HÃ¶gtrycks-/varmvatten\n\nExempel: IP66 = dammtÃ¤t + kraftig vattenspolning.`
    }
  },
  {
    cat: 'tech',
    keywords: { en: ['relay','fuse','cable','amp','ampere','installation','wire'], sv: ['relÃ¤','sÃ¤kring','kabel','ampere','installation','kabeldiameter','kabelarea'] },
    answer: {
      en: `Guidelines for relay, fuse and cable:\n\nâ€¢ Relay: At least 10% above max load, and higher amp than fuse\nâ€¢ Fuse: Just above total max load â€” always the weakest link\nâ€¢ Cable: Depends on load, length, and cable material â€” no universal answer\n\nâš ï¸ If unsure, consult a vehicle electrician.`,
      sv: `Riktlinjer fÃ¶r relÃ¤, sÃ¤kring och kabel:\n\nâ€¢ RelÃ¤: Minst 10% Ã¶ver maxeffekten, och hÃ¶gre ampere Ã¤n sÃ¤kringen\nâ€¢ SÃ¤kring: Strax Ã¶ver total maxeffekt â€” alltid den svagaste lÃ¤nken\nâ€¢ Kabelarea: Beror pÃ¥ effekt, lÃ¤ngd och material â€” inget generellt svar\n\nâš ï¸ Ã„r du osÃ¤ker, anlita en fordonselektriker.`
    }
  },
  {
    cat: 'tech',
    keywords: { en: ['side marker','indicator','blinker','e-approved side'], sv: ['sidomarkering','blinkers','godkÃ¤nd sidomarkering','e-godkÃ¤nd'] },
    answer: {
      en: `Can you use an E-approved side marker as an indicator?\n\nNo. If a product is only E-approved as a side marker, it may only be used as a side marker. All functions must be individually E-approved for their intended use.`,
      sv: `Kan jag anvÃ¤nda en E-godkÃ¤nd sidomarkering som blinkers?\n\nNej. Om produkten bara Ã¤r godkÃ¤nd som sidomarkering fÃ¥r den bara anvÃ¤ndas som sidomarkering. Alla funktioner mÃ¥ste vara E-godkÃ¤nda fÃ¶r respektive Ã¤ndamÃ¥l.`
    }
  },
  // ORDER
  {
    cat: 'order',
    keywords: { en: ['minimum order','order limit','smallest order'], sv: ['minsta order','ordergrÃ¤ns','minsta bestÃ¤llning','lÃ¤gsta order'] },
    answer: { en: `There is no minimum order limit at Strands. Order as little or as much as you need! ğŸ›’`, sv: `Det finns ingen minsta ordergrÃ¤ns hos Strands. BestÃ¤ll hur lite eller mycket du vill! ğŸ›’` }
  },
  {
    cat: 'order',
    keywords: { en: ['change order','modify order','cancel order','edit order'], sv: ['Ã¤ndra bestÃ¤llning','Ã¤ndra order','avboka','avbryta bestÃ¤llning'] },
    answer: {
      en: `Orders are processed promptly â€” no changes can be made once confirmed (including delivery address).\n\nIf not yet confirmed:\nğŸ“ +46(0)320-450450\nğŸ• 08:00â€“17:00 business days`,
      sv: `BestÃ¤llningar behandlas omgÃ¥ende â€” inga Ã¤ndringar kan gÃ¶ras nÃ¤r bestÃ¤llningen Ã¤r bekrÃ¤ftad (inkl. leveransadress).\n\nOm den inte Ã¤r bekrÃ¤ftad Ã¤nnu:\nğŸ“ +46(0)320-450450\nğŸ• 08:00â€“17:00 vardagar`
    }
  },
  {
    cat: 'order',
    keywords: { en: ['track order','tracking','where is my order','follow package','shipment'], sv: ['spÃ¥ra bestÃ¤llning','spÃ¥ra paket','var Ã¤r mitt paket','leveransbesked','tracking'] },
    answer: {
      en: `Once your order is shipped, you'll receive an email with a tracking link. You can also track via the PostNord app.`,
      sv: `NÃ¤r din bestÃ¤llning skickats fÃ¥r du ett mejl med spÃ¥rningslÃ¤nk. Du kan Ã¤ven fÃ¶lja paketet via PostNords app.`
    }
  },
  {
    cat: 'order',
    keywords: { en: ['express delivery','express shipping','fast delivery','urgent'], sv: ['expressfrakt','snabb leverans','expresslevrans','brÃ¥ttom'] },
    answer: {
      en: `Unfortunately Strands does not offer express delivery. We ship via PostNord which has no express option.`,
      sv: `TyvÃ¤rr erbjuder Strands ingen expressfrakt. Vi skickar via PostNord som inte erbjuder express.`
    }
  },
  {
    cat: 'order',
    keywords: { en: ['delivery time','how long','shipping time','when will'], sv: ['leveranstid','hur lÃ¥ng','leverans tid','nÃ¤r kommer'] },
    answer: {
      en: `ğŸ‡¸ğŸ‡ª Sweden: Approximately 1â€“4 business days.\nğŸŒ International: Contact us at support@strands.se for an estimate.`,
      sv: `ğŸ‡¸ğŸ‡ª Sverige: Uppskattningsvis 1â€“4 vardagar.\nğŸŒ Utomlands: Kontakta oss pÃ¥ support@strands.se fÃ¶r uppskattad leveranstid.`
    }
  },
  {
    cat: 'order',
    keywords: { en: ['missing item','items missing','incomplete order'], sv: ['saknas varor','saknade varor','ofullstÃ¤ndig bestÃ¤llning','varor saknas'] },
    answer: {
      en: `Missing items? The item may be on backorder or a picking error occurred.\n\nğŸ“§ support@strands.se\nğŸ“ +46(0)320-450450`,
      sv: `Saknas varor? Varan kan vara restnoterad eller sÃ¥ har ett plockfel skett.\n\nğŸ“§ support@strands.se\nğŸ“ +46(0)320-450450`
    }
  },
  {
    cat: 'order',
    keywords: { en: ['wrong product','wrong item','received wrong'], sv: ['fel vara','fel produkt','fick fel'] },
    answer: {
      en: `We apologize for the mix-up! Contact us and we'll assist promptly:\n\nğŸ“§ support@strands.se\nğŸ“ +46(0)320-450450`,
      sv: `Vi beklagar felet! Kontakta oss sÃ¥ hjÃ¤lper vi dig direkt:\n\nğŸ“§ support@strands.se\nğŸ“ +46(0)320-450450`
    }
  },
  {
    cat: 'order',
    keywords: { en: ['broken delivery','damaged','arrived broken','broken product received'], sv: ['trasig vara','skadad vara','trasig leverans','skadad fÃ¶rpackning'] },
    answer: {
      en: `Received a broken product?\n\n1. Check if outer packaging is damaged â†’ contact the transport company\n2. Then contact Strands:\nğŸ“§ support@strands.se\nğŸ“ +46(0)320-450450`,
      sv: `FÃ¥tt en trasig vara?\n\n1. Kontrollera om ytterfÃ¶rpackningen Ã¤r skadad â†’ kontakta transportfÃ¶retaget\n2. Kontakta sedan Strands:\nğŸ“§ support@strands.se\nğŸ“ +46(0)320-450450`
    }
  },
  {
    cat: 'order',
    keywords: { en: ['reseller','become reseller','retailer','dealer'], sv: ['Ã¥terfÃ¶rsÃ¤ljare','bli Ã¥terfÃ¶rsÃ¤ljare','distributÃ¶r','sÃ¤lja strands'] },
    answer: {
      en: `Interested in becoming a Strands reseller?\n\nğŸ“§ order@strands.se\nğŸ”— <a href="https://strandseurope.com/sv/become-a-retailer" target="_blank">Fill in the form â†’</a>`,
      sv: `Intresserad av att bli Strands-Ã¥terfÃ¶rsÃ¤ljare?\n\nğŸ“§ order@strands.se\nğŸ”— <a href="https://strandseurope.com/sv/become-a-retailer" target="_blank">Fyll i formulÃ¤ret â†’</a>`
    }
  },
  // WARRANTY
  {
    cat: 'warranty',
    keywords: { en: ['warranty','guarantee','how long warranty','warranty period'], sv: ['garanti','garantitid','hur lÃ¥ng garanti','garantiperiod'] },
    answer: {
      en: `Strands Lighting Division (SLD) products: 3â€“6 year warranty.\nOther ranges: typically 1 year.\n\nCovers manufacturing defects. Does NOT cover incorrect use or installation.\n\nğŸ”— <a href="https://strandseurope.com/sv/about-us/function-warranty" target="_blank">Full warranty terms â†’</a>\nğŸ“ <a href="${SP}" target="_blank">Aftersales documents folder â†’</a>`,
      sv: `Strands Lighting Division (SLD)-produkter: 3â€“6 Ã¥rs garanti.\nÃ–vriga produktsortiment: normalt 1 Ã¥r.\n\nTÃ¤cker tillverkningsfel. TÃ¤cker INTE felaktig anvÃ¤ndning eller installation.\n\nğŸ”— <a href="https://strandseurope.com/sv/about-us/function-warranty" target="_blank">FullstÃ¤ndiga garantivillkor â†’</a>\nğŸ“ <a href="${SP}" target="_blank">Aftersales-dokumentmapp â†’</a>`
    }
  },
  {
    cat: 'warranty',
    keywords: { en: ['product broken','stopped working','warranty claim','submit claim','make a claim'], sv: ['produkt gÃ¥tt sÃ¶nder','slutat fungera','reklamation','garantiÃ¤rende','anmÃ¤la garanti'] },
    answer: {
      en: `Product broken?\n\nâ€¢ Bought from a retailer â†’ contact the retailer\nâ€¢ Direct claim with Strands:\nğŸ“§ reklamation@strands.se\n\nğŸ”— <a href="https://strandseurope.com/sv/contact/claims-and-returns" target="_blank">Claims & returns â†’</a>\nğŸ“ <a href="${SP}" target="_blank">Aftersales documents folder â†’</a>`,
      sv: `Produkt gÃ¥tt sÃ¶nder?\n\nâ€¢ KÃ¶pt frÃ¥n Ã¥terfÃ¶rsÃ¤ljare â†’ kontakta Ã¥terfÃ¶rsÃ¤ljaren\nâ€¢ Direkt reklamation hos Strands:\nğŸ“§ reklamation@strands.se\n\nğŸ”— <a href="https://strandseurope.com/sv/contact/claims-and-returns" target="_blank">Reklamation & retur â†’</a>\nğŸ“ <a href="${SP}" target="_blank">Aftersales-dokumentmapp â†’</a>`
    }
  },
  {
    cat: 'warranty',
    keywords: { en: ['return','regret','cancel','right of withdrawal','ordered wrong'], sv: ['retur','Ã¥ngra','Ã¥ngervrÃ¤tt','returnera','bestÃ¤llt fel'] },
    answer: {
      en: `Returning a purchase:\n\nNote: Right of withdrawal does not apply to B2B transactions.\n\nHowever, Strands takes a flexible approach â€” contact us as early as possible:\nğŸ“§ support@strands.se\nğŸ”— <a href="https://strandseurope.com/sv/contact/claims-and-returns" target="_blank">Claims & returns â†’</a>`,
      sv: `Returnera ett kÃ¶p:\n\nObs: Ã…ngerrÃ¤tten gÃ¤ller inte fÃ¶r B2B-transaktioner.\n\nStrands Ã¤r lÃ¶sningsorienterade â€” kontakta oss sÃ¥ tidigt som mÃ¶jligt:\nğŸ“§ support@strands.se\nğŸ”— <a href="https://strandseurope.com/sv/contact/claims-and-returns" target="_blank">Reklamation & retur â†’</a>`
    }
  },
  {
    cat: 'warranty',
    keywords: { en: ['cut dt connector','dt connector','dt plug'], sv: ['klippa dt-kontakt','dt-kontakt','dt kontakt'] },
    answer: {
      en: `No, the warranty does NOT apply if you cut the DT connector.\n\nğŸ”— <a href="https://strandseurope.com/sv/about-us/function-warranty" target="_blank">Warranty terms â†’</a>`,
      sv: `Nej, garantin gÃ¤ller INTE om du klipper av DT-kontakten.\n\nğŸ”— <a href="https://strandseurope.com/sv/about-us/function-warranty" target="_blank">Garantivillkor â†’</a>`
    }
  },
  {
    cat: 'warranty',
    keywords: { en: ['cut cable','shorten cable','cable length'], sv: ['klippa kabeln','korta kabeln','kabellÃ¤ngd'] },
    answer: {
      en: `The warranty does not apply if you cut the cable shorter than 50 cm.\n\nğŸ”— <a href="https://strandseurope.com/sv/about-us/function-warranty" target="_blank">Warranty terms â†’</a>`,
      sv: `Garantin gÃ¤ller inte om du klipper kabeln kortare Ã¤n 50 cm.\n\nğŸ”— <a href="https://strandseurope.com/sv/about-us/function-warranty" target="_blank">Garantivillkor â†’</a>`
    }
  },
  {
    cat: 'warranty',
    keywords: { en: ['modify product','modification','warranty void','tamper','disassemble','opened'], sv: ['modifiera','Ã¶ppna','demontera','modifiering','garanti ogiltig'] },
    answer: {
      en: `Modifying or disassembling a product:\n\nâ€¢ Modifying the product â†’ warranty is void\nâ€¢ Opening a sealed product (e.g. LED bar) â†’ warranty expires\nâ€¢ Opening products designed to be opened (e.g. halogen lamp to change bulb) â†’ warranty maintained\n\nğŸ”— <a href="https://strandseurope.com/sv/about-us/function-warranty" target="_blank">Warranty terms â†’</a>`,
      sv: `Modifiera eller Ã¶ppna en produkt:\n\nâ€¢ Modifiera produkten â†’ garantin upphÃ¶r\nâ€¢ Ã–ppna en fÃ¶rseglad produkt (t.ex. LED-bar) â†’ garantin upphÃ¶r\nâ€¢ Ã–ppna produkter avsedda att Ã¶ppnas (t.ex. halogenlampa fÃ¶r byte av glÃ¶dlampa) â†’ garantin gÃ¤ller\n\nğŸ”— <a href="https://strandseurope.com/sv/about-us/function-warranty" target="_blank">Garantivillkor â†’</a>`
    }
  },
  {
    cat: 'warranty',
    keywords: { en: ['paint','lacquer','spray paint','painted light'], sv: ['lacka','lackera','mÃ¥la','spraya','lack'] },
    answer: {
      en: `Painting a driving light depends on the product â€” check the manual.\n\nIf you do paint it:\nâ€¢ Protect the breather vent\nâ€¢ Do NOT use an oven to cure the paint\n\nOtherwise the warranty may be void.\n\nğŸ”— <a href="https://strandseurope.com/sv/about-us/function-warranty" target="_blank">Warranty terms â†’</a>`,
      sv: `Om lackering pÃ¥verkar garantin beror pÃ¥ produkten â€” kontrollera manualen.\n\nOm du Ã¤ndÃ¥ lackar:\nâ€¢ Skydda andningshÃ¥let\nâ€¢ AnvÃ¤nd INTE ugn fÃ¶r hÃ¤rdning\n\nAnnars kan garantin upphÃ¶ra.\n\nğŸ”— <a href="https://strandseurope.com/sv/about-us/function-warranty" target="_blank">Garantivillkor â†’</a>`
    }
  },
  // CAN BUS
  {
    cat: 'canbus',
    keywords: { en: ['canbus interface','can bus','270417','when do i need interface'], sv: ['canbus interface','can bus','270417','nÃ¤r behÃ¶vs interface','behÃ¶ver jag interface'] },
    answer: {
      en: `When do you need a CAN bus interface (Part No. 270417)?\n\nWhen you want driving lights to activate with the high beam AND your vehicle only delivers a current pulse (not constant power) to the high beam.\n\nMainly needed for xenon or LED headlamp vehicles.\n\nNote: Connecting directly to battery with a separate switch works without CAN bus issues, but won't activate with the high beam.`,
      sv: `NÃ¤r behÃ¶vs Canbus Interface (art.nr 270417)?\n\nNÃ¤r du vill att extraljuset ska aktiveras med helljuset OCH bilen bara levererar en strÃ¶mimpuls (inte konstant strÃ¶m) till helljuset.\n\nHuvudsakligen fÃ¶r bilar med xenon- eller LED-strÃ¥lkastare.\n\nObs: Kopplar du direkt till batteri med separat reglage slipper du canbus-problem, men ljuset aktiveras inte med helljuset.`
    }
  },
  {
    cat: 'canbus',
    keywords: { en: ['high beam automatic','adaptive high beam','auto high beam'], sv: ['helljusautomatik','adaptivt helljus','automatiskt helljus'] },
    answer: {
      en: `Adaptive/automatic high beam will NOT work with the CAN bus interface (270417).\n\nIt still works in manual high beam mode.`,
      sv: `Helljusautomatik fungerar INTE med Canbus Interface (270417).\n\nManuellt helljus fungerar fortfarande.`
    }
  },
  {
    cat: 'canbus',
    keywords: { en: ['software update','car update','can bus after update'], sv: ['mjukvaruuppdatering','biluppdatering','canbus efter uppdatering','service uppdatering'] },
    answer: {
      en: `After a car software update:\n\nThe CAN bus interface may stop working as the car may use a new signal. It needs to be updated through Nitor.\n\nâš ï¸ If the interface is more than 12 months old, it cannot be updated and may need replacing.`,
      sv: `Efter en biluppdatering:\n\nCanbus-interfacet kan sluta fungera eftersom bilen kan anvÃ¤nda en ny signal. Det behÃ¶ver uppdateras via Nitor.\n\nâš ï¸ Om interfacet Ã¤r Ã¤ldre Ã¤n 12 mÃ¥nader kan det inte uppdateras och kan behÃ¶va bytas.`
    }
  },
  {
    cat: 'canbus',
    keywords: { en: ['resistor','led taillights','tail light','canbus error','load resistor'], sv: ['motstÃ¥nd','led-bakljus','bakljus','canbus fel','load resistor'] },
    answer: {
      en: `Do you need resistors for LED taillights?\n\nDepends on the car â€” some work fine, others need a resistor to trick the computer.\n\nğŸ’¡ Try without resistor first. If it doesn't work, add a resistor.`,
      sv: `BehÃ¶ver du motstÃ¥nd till LED-bakljus?\n\nBeror pÃ¥ bilen â€” vissa fungerar fint, andra behÃ¶ver motstÃ¥nd fÃ¶r att lura bilens dator.\n\nğŸ’¡ Prova utan motstÃ¥nd fÃ¶rst. Om det inte fungerar, kÃ¶p ett motstÃ¥nd.`
    }
  },
  {
    cat: 'canbus',
    keywords: { en: ['xbb dongle new car','will xbb work','obd port locked','firewall obd','pp-can','secure gateway'], sv: ['xbb ny bil','fungerar xbb','obd port lÃ¥st','firewall obd','pp-can','secure gateway'] },
    answer: {
      en: `Will XBB Dongle work with your new car? Probably yes â€” check two things:\n\n1. Recipe: Check the compatible vehicle list:\nğŸ”— <a href="https://www.xbb.se/xbbTable/bilmodeller.php" target="_blank">Compatible car list â†’</a>\n\n2. OBD Port: Some newer vehicles (Volvo post-2017, certain Mercedes, newer VAG) have a Secure Gateway blocking the Dongle.\n\nâ€¢ Open OBD port: Kit 270425 + wiring 907003\nâ€¢ Locked OBD port: PP-CAN + wiring 907051/907052\nâ€¢ No OBD port: PP-CAN-FD (requires technical knowledge)\n\nğŸ’¡ Contact us with your registration number:\nğŸ“§ support@strands.se`,
      sv: `Fungerar XBB Dongle med din nya bil? FÃ¶rmodligen ja â€” kontrollera tvÃ¥ saker:\n\n1. Receptet: Kolla listan Ã¶ver kompatibla bilar:\nğŸ”— <a href="https://www.xbb.se/xbbTable/bilmodeller.php" target="_blank">Lista kompatibla bilar â†’</a>\n\n2. OBD-port: Nyare bilar (Volvo efter 2017, vissa Mercedes, nyare VAG) kan ha Secure Gateway som blockerar Dongeln.\n\nâ€¢ Ã–ppen OBD-port: Kit 270425 + kablage 907003\nâ€¢ LÃ¥st OBD-port: PP-CAN + kablage 907051/907052\nâ€¢ Ingen OBD-port: PP-CAN-FD (krÃ¤ver teknisk kunskap)\n\nğŸ’¡ Kontakta oss med ditt reg.nr:\nğŸ“§ support@strands.se`
    }
  },
  // PRODUCTS
  {
    cat: 'product',
    keywords: { en: ['which light','which driving light','choose light','what light for my car'], sv: ['vilket extraljus','vilket ljus','vÃ¤lja ljus','passar min bil','rÃ¤tt ljus'] },
    answer: {
      en: `Choosing the right driving light:\n\nğŸš› Large car/truck â†’ 9" driving light or large LED bar\nğŸš LCV/regular car â†’ 7" driving light or slim LED bar\n\nBeam patterns:\nâ€¢ Highway/mountain â†’ Long-distance/pencil\nâ€¢ Forest/country â†’ Optimized/flood (wider)\nâ€¢ All-round â†’ Extended/combo\n\nğŸ”— <a href="https://strandseurope.com" target="_blank">Browse Strands products â†’</a>`,
      sv: `VÃ¤lja rÃ¤tt extraljus:\n\nğŸš› Stor bil/lastbil â†’ 9" extraljus eller stor LED-bar\nğŸš LÃ¤tt lastbil/vanlig bil â†’ 7" extraljus eller smal LED-bar\n\nLjusbilder:\nâ€¢ MotorvÃ¤g/fjÃ¤llvÃ¤g â†’ Long-distance/pencil\nâ€¢ Skogs-/landsvÃ¤g â†’ Optimized/flood (bredare)\nâ€¢ Allrond â†’ Extended/combo\n\nğŸ”— <a href="https://strandseurope.com" target="_blank">Hitta Strands-produkter â†’</a>`
    }
  },
  {
    cat: 'product',
    keywords: { en: ['no-glare','noglare','glare','blinding','for9t'], sv: ['no-glare','blÃ¤ndning','blÃ¤ndfri','for9t'] },
    answer: {
      en: `No-Glare technology (FOR9T):\n\nThe unique lens divides light output â€” stronger in the lower beam, more diffused higher up. Less blinding than conventional work lights while still projecting a focused beam exactly where needed.`,
      sv: `No-Glare-tekniken (FOR9T):\n\nDen unika linsen delar upp ljusutflÃ¶det â€” starkare i den nedre delen av strÃ¥len, mer diffust hÃ¶gre upp. Mindre blÃ¤ndande Ã¤n konventionella arbetsljus, men projicerar Ã¤ndÃ¥ en fokuserad ljusbild precis dÃ¤r det behÃ¶vs.`
    }
  },
  {
    cat: 'product',
    keywords: { en: ['e-mode','xperience mode','two modes','light modes'], sv: ['e-lÃ¤ge','xperience-lÃ¤ge','e-mode','xperience mode','tvÃ¥ lÃ¤gen'] },
    answer: {
      en: `E-mode vs Xperience mode:\n\nâœ… E-mode â€” E-approved, road legal. A significant boost to your high beam. Less glare in rain/snow.\n\nâš¡ Xperience mode â€” Maximum power. Best luminosity and range. For very dark and challenging conditions.`,
      sv: `E-lÃ¤ge vs Xperience-lÃ¤ge:\n\nâœ… E-lÃ¤ge â€” E-godkÃ¤nt och lagligt. Kraftigt tillskott till helljuset. Mindre reflexer vid regn/snÃ¶.\n\nâš¡ Xperience-lÃ¤ge â€” Maximal effekt. BÃ¤sta ljusstyrka och rÃ¤ckvidd. FÃ¶r vÃ¤ldigt mÃ¶rka och krÃ¤vande fÃ¶rhÃ¥llanden.`
    }
  },
  {
    cat: 'product',
    keywords: { en: ['condensation','moisture','water inside lamp','fog inside'], sv: ['kondens','fukt','vatten i lampan','imma','kondensvatten'] },
    answer: {
      en: `Condensation inside a lamp is normal â€” caused by humidity and temperature changes. Most Strands lights have a breather vent. The moisture will dissipate when you use the lamp. No action needed.`,
      sv: `Kondens inuti en lampa Ã¤r normalt â€” orsakas av hÃ¶g luftfuktighet och temperaturvÃ¤xlingar. De flesta Strands-lampor har ett andningshÃ¥l. Fukten fÃ¶rsvinner nÃ¤r du anvÃ¤nder lampan. Ingen Ã¥tgÃ¤rd behÃ¶vs.`
    }
  },
  {
    cat: 'product',
    keywords: { en: ['manual','instruction','user guide','find manual'], sv: ['manual','instruktion','bruksanvisning','hitta manual','produktmanual'] },
    answer: {
      en: `Find the product manual on the product page at strandseurope.com.\n\nCan't find it?\nğŸ“§ support@strands.se\nğŸ“ <a href="${SP}" target="_blank">Aftersales documents folder â†’</a>`,
      sv: `Hitta produktmanualen pÃ¥ produktsidan pÃ¥ strandseurope.com.\n\nHittar du den inte?\nğŸ“§ support@strands.se\nğŸ“ <a href="${SP}" target="_blank">Aftersales-dokumentmapp â†’</a>`
    }
  },
  {
    cat: 'product',
    keywords: { en: ['spare parts','replacement parts','spare'], sv: ['reservdelar','ersÃ¤ttningsdelar','reservdel'] },
    answer: {
      en: `Strands can sometimes offer spare parts and mounting accessories.\n\nğŸ“§ support@strands.se\nğŸ”— <a href="https://strandseurope.com/sv/kategorier/monteringstillbehor/fasten" target="_blank">Browse mounting accessories â†’</a>`,
      sv: `Strands kan i vissa fall erbjuda reservdelar och monteringstillbehÃ¶r.\n\nğŸ“§ support@strands.se\nğŸ”— <a href="https://strandseurope.com/sv/kategorier/monteringstillbehor/fasten" target="_blank">Se monteringstillbehÃ¶r â†’</a>`
    }
  },
  {
    cat: 'product',
    keywords: { en: ['repair','repairs','fix product'], sv: ['reparation','laga','reparera produkt'] },
    answer: {
      en: `Strands does not offer product repairs. Most products are sealed from the factory. Submit a warranty claim instead:\n\nğŸ“§ reklamation@strands.se\nğŸ”— <a href="https://strandseurope.com/sv/contact/claims-and-returns" target="_blank">Claims & returns â†’</a>`,
      sv: `Strands erbjuder inte produktreparationer. De flesta produkter Ã¤r fÃ¶rseglade frÃ¥n fabriken. Skicka in en reklamation istÃ¤llet:\n\nğŸ“§ reklamation@strands.se\nğŸ”— <a href="https://strandseurope.com/sv/contact/claims-and-returns" target="_blank">Reklamation & retur â†’</a>`
    }
  },
  // CONTACT
  {
    cat: 'contact',
    keywords: { en: ['contact','support','phone','email','reach','customer service','help','opening hours'], sv: ['kontakt','support','telefon','mejl','kundservice','hjÃ¤lp','Ã¶ppettider','kontakta'] },
    answer: {
      en: `Strands contact:\n\nğŸ“ +46(0)320-450450\nğŸ“§ Customer service: order@strands.se\nğŸ“§ Technical support: support@strands.se\nğŸ“§ Warranty claims: reklamation@strands.se\n\nğŸ• 08:00â€“17:00 business days\nEmail response within 24 hours on business days.\n\nğŸ¢ Strands Group AB, HagalundsvÃ¤gen, 51172 Fritsla, Sweden\n\nğŸ“ <a href="${SP}" target="_blank">Aftersales documents folder â†’</a>`,
      sv: `Strands kontakt:\n\nğŸ“ +46(0)320-450450\nğŸ“§ Kundservice: order@strands.se\nğŸ“§ Teknisk support: support@strands.se\nğŸ“§ Reklamation: reklamation@strands.se\n\nğŸ• 08:00â€“17:00 vardagar\nMejlsvar inom 24 timmar pÃ¥ vardagar.\n\nğŸ¢ Strands Group AB, HagalundsvÃ¤gen, 51172 Fritsla, Sverige\n\nğŸ“ <a href="${SP}" target="_blank">Aftersales-dokumentmapp â†’</a>`
    }
  },
  {
    cat: 'contact',
    keywords: { en: ['document','documents','download','file','folder','sharepoint','aftersales'], sv: ['dokument','ladda ner','fil','mapp','sharepoint','aftersales','aftersales-dokument'] },
    answer: {
      en: `Access all Aftersales documents (manuals, warranty terms, return forms, etc.):\n\nğŸ“ <a href="${SP}" target="_blank">Open Aftersales documents folder â†’</a>\n\nâš ï¸ You need to be logged in with your Strands Microsoft 365 account.\n\nCan't find what you need?\nğŸ“§ support@strands.se`,
      sv: `TillgÃ¥ng till alla Aftersales-dokument (manualer, garantivillkor, returformulÃ¤r m.m.):\n\nğŸ“ <a href="${SP}" target="_blank">Ã–ppna Aftersales-dokumentmapp â†’</a>\n\nâš ï¸ Du behÃ¶ver vara inloggad med ditt Strands Microsoft 365-konto.\n\nHittar du inte det du sÃ¶ker?\nğŸ“§ support@strands.se`
    }
  },
  {
    cat: 'contact',
    keywords: { en: ['images','photos','copyright','use images','use text','permission'], sv: ['bilder','foton','copyright','anvÃ¤nda bilder','anvÃ¤nda text','upphovsrÃ¤tt'] },
    answer: {
      en: `Can you use Strands images/text on your website?\n\nAs a rule, no. All content is protected under copyright law. Contact Strands first for permission.`,
      sv: `FÃ¥r du anvÃ¤nda Strands bilder/text pÃ¥ din webbplats?\n\nSom regel nej. Allt innehÃ¥ll skyddas av upphovsrÃ¤tten. Kontakta Strands fÃ¶rst fÃ¶r tillstÃ¥nd.`
    }
  }
];

// â”€â”€ ENGINE â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
function findAnswer(query) {
  const q = query.toLowerCase();
  let bestMatch = null;
  let bestScore = 0;

  for (const faq of FAQ) {
    let score = 0;
    const kws = faq.keywords[lang] || faq.keywords.en;
    for (const kw of kws) {
      if (q.includes(kw.toLowerCase())) score += kw.split(' ').length;
    }
    // also check other language keywords
    const kws2 = faq.keywords[lang === 'en' ? 'sv' : 'en'] || [];
    for (const kw of kws2) {
      if (q.includes(kw.toLowerCase())) score += Math.ceil(kw.split(' ').length / 2);
    }
    if (score > bestScore) { bestScore = score; bestMatch = faq; }
  }

  if (bestScore > 0) return bestMatch.answer[lang] || bestMatch.answer.en;
  const fallback = UI[lang].fallback;
  const g = googleSearchUrl(query);
  const gs = googleSiteSearchUrl(query, PRODUCT_SITE);
  const articles = detectArticleNumbers(query);

  // Log unanswered queries so you can see what users miss most (stored locally in the browser).
  logUnanswered(query, { lang, articles });

  const articleBlock = articles.length ? (
    '<br><br>ğŸ›ï¸ <b>' + (lang === 'sv' ? 'Produktsida' : 'Product page') + '</b>: ' +
    articles.slice(0, 3)
      .map(a => '<a href="' + googleSiteSearchUrl(a, PRODUCT_SITE) + '" target="_blank" rel="noopener">' + a + '</a>')
      .join(' Â· ')
  ) : '';

  return fallback + articleBlock +
    '<br><br>ğŸ” <a href="' + g + '" target="_blank" rel="noopener">' + (lang === 'sv' ? 'SÃ¶k pÃ¥ Google efter' : 'Search Google for') + ': â€œ' + escapeHtml(query) + 'â€</a>' +
    '<br>ğŸŒ <a href="' + gs + '" target="_blank" rel="noopener">' + (lang === 'sv' ? 'SÃ¶k pÃ¥ strandseurope.com efter' : 'Search strandseurope.com for') + ': â€œ' + escapeHtml(query) + 'â€</a>';
}

// â”€â”€ UI FUNCTIONS â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
function setLang(l, btn) {
  lang = l;
  document.querySelectorAll('.lang-btn').forEach(b => b.classList.remove('active'));
  btn.classList.add('active');
  document.getElementById('h-title').textContent = UI[lang].title;
  document.getElementById('h-sub').textContent = UI[lang].sub;
  document.getElementById('userInput').placeholder = UI[lang].placeholder;
  renderTabs('all');
  renderSuggestions('all');
  // Clear messages and show welcome in new language
  const msgs = document.getElementById('messages');
  msgs.innerHTML = '';
  addMessage('bot', UI[lang].welcome);
}

function renderTabs(activeCat) {
  const u = UI[lang];
  const tabs = document.getElementById('tabs');
  tabs.innerHTML = u.tabs.map((t, i) =>
    `<button class="tab-btn ${u.tabKeys[i] === activeCat ? 'active' : ''}" onclick="setCategory('${u.tabKeys[i]}', this)">${t}</button>`
  ).join('');
}

function renderSuggestions(cat) {
  const qs = UI[lang].categories[cat] || UI[lang].categories.all;
  const sugg = document.getElementById('suggestions');
  sugg.style.display = 'flex';
  sugg.innerHTML = qs.map(q => `<button class="suggestion-btn" onclick="ask(this)">${q}</button>`).join('');
}

function setCategory(cat, btn) {
  document.querySelectorAll('.tab-btn').forEach(b => b.classList.remove('active'));
  btn.classList.add('active');
  renderSuggestions(cat);
}

function addMessage(role, html) {
  const messages = document.getElementById('messages');
  const div = document.createElement('div');
  div.className = `message ${role}`;
  div.innerHTML = `
    <div class="avatar ${role}-avatar">${role === 'bot' ? 'STR' : lang === 'sv' ? 'Du' : 'You'}</div>
    <div class="bubble">${html.replace(/\n/g, '<br>')}</div>
  `;
  messages.appendChild(div);
  messages.scrollTop = messages.scrollHeight;
}

function showTyping() {
  const messages = document.getElementById('messages');
  const div = document.createElement('div');
  div.className = 'message bot'; div.id = 'typing';
  div.innerHTML = `<div class="avatar bot-avatar">STR</div><div class="bubble"><div class="dots"><span></span><span></span><span></span></div></div>`;
  messages.appendChild(div);
  messages.scrollTop = messages.scrollHeight;
}

function removeTyping() { const t = document.getElementById('typing'); if (t) t.remove(); }

function ask(btn) { document.getElementById('userInput').value = btn.textContent; sendMessage(); }

function sendMessage() {
  const input = document.getElementById('userInput');
  const text = input.value.trim();
  if (!text) return;
  document.getElementById('suggestions').style.display = 'none';
  addMessage('user', text);
  input.value = '';

  // Admin / diagnostic commands (local only):
  // /unanswered            -> show top unanswered queries
  // /unanswered clear      -> clear log
  const lower = text.toLowerCase();
  if (lower === '/unanswered' || lower === '/unanswered top') {
    showTyping();
    setTimeout(() => { removeTyping(); addMessage('bot', renderUnansweredReport(15)); }, 350);
    return;
  }
  if (lower === '/unanswered clear') {
    clearUnanswered();
    showTyping();
    setTimeout(() => {
      removeTyping();
      addMessage('bot', lang === 'sv' ? 'Loggen Ã¤r rensad.' : 'Log cleared.');
    }, 250);
    return;
  }

  showTyping();
  setTimeout(() => { removeTyping(); addMessage('bot', findAnswer(text)); }, 500 + Math.random() * 300);
}

window.onloadwindow.onload = () => {
  renderTabs('all');
  renderSuggestions('all');
  setTimeout(() => addMessage('bot', UI[lang].welcome), 400);
};
</script>
</body>
</html>
